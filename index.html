
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/lovable-uploads/soundraiser-logo/Iso A fav.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Soundraiser - Smart Links for Musicians</title>
    <meta name="description" content="Create beautiful Smart Links to promote your music across all streaming platforms. Grow your audience with Soundraiser." />
    <meta name="author" content="Soundraiser" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://soundraiser.io" />
    <meta property="og:title" content="Soundraiser - Smart Links for Musicians" />
    <meta property="og:description" content="Create beautiful Smart Links to promote your music across all streaming platforms. Grow your audience with Soundraiser." />
    <meta property="og:image" content="https://soundraiser.io/lovable-uploads/soundraiser-logo/Logo A.png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Soundraiser - Smart Links for Musicians" />
    <meta name="twitter:description" content="Create beautiful Smart Links to promote your music across all streaming platforms. Grow your audience with Soundraiser." />
    <meta name="twitter:image" content="https://soundraiser.io/lovable-uploads/soundraiser-logo/Logo A.png" />
    
    <!-- Preconnect to image optimization endpoint -->
    <link rel="preconnect" href="/_next" crossorigin />
    
    <!-- Preload LCP image with responsive sizing -->
    <link
      rel="preload"
      as="image"
      href="/_next/image?url=/lovable-uploads/3f0382f4-6742-422d-a591-2828a65d9e83.png&w=304&q=75"
      media="(max-width: 768px)"
      type="image/webp"
    />
    <link
      rel="preload"
      as="image"
      href="/_next/image?url=/lovable-uploads/3f0382f4-6742-422d-a591-2828a65d9e83.png&w=760&q=75"
      media="(min-width: 769px)"
      type="image/webp"
    />
    
    <!-- Google Analytics - Simplified Implementation -->
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      
      // Set default measurement ID (main product)
      gtag('config', 'G-2CFB508HGL', {
        send_page_view: true,
        anonymize_ip: true
      });
      
      // Function to switch to smart links measurement ID
      window.switchToSmartLinkTracking = function() {
        gtag('config', 'G-1XE9T2280Q', {
          send_page_view: true,
          anonymize_ip: true
        });
        console.log('[GA4] Switched to Smart Link tracking');
      };
    </script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-2CFB508HGL"></script>

    <!-- Direct reCAPTCHA loading -->
    <script src="https://www.google.com/recaptcha/api.js?render=6LeUZ30pAAAAACaK4YM4czGhGFU-A6HliZYn680F"></script>
    <style>
      .grecaptcha-badge {
        visibility: hidden;
      }
    </style>
    
    <!-- Enhanced Crawler detection script with more user agents -->
    <script>
      (function() {
        // Check if URL is a smart link
        const isSmartLink = window.location.pathname.startsWith('/link/');
        
        // Expanded crawler detection regex
        const crawlerRegex = /(facebook|twitter|linkedin|pinterest|whatsapp|telegram|discord|bot|crawl|spider|google|bing|yahoo|facebookexternalhit|facebot|instapaper|flipboard|tumblr|slackbot|skype|snapchat|pinterest|yandex)/i;
        const isCrawler = crawlerRegex.test(navigator.userAgent);
        
        // Set a global flag for crawlers
        window.isCrawler = isCrawler;
        
        // If it's a crawler and trying to access a smart link, prevent client-side routing
        if (isCrawler && isSmartLink) {
          console.log('Crawler detected:', navigator.userAgent);
          
          // For smart links, disable client-side rendering entirely
          window._disableSPAForSmartLinks = true;
          
          // Create a debug element visible only to crawlers
          document.addEventListener('DOMContentLoaded', function() {
            const debugEl = document.createElement('div');
            debugEl.style.display = 'none';
            debugEl.id = 'crawler-debug-info';
            debugEl.textContent = 'Crawler detected: ' + navigator.userAgent + '. SPA disabled for SmartLinks.';
            document.body.appendChild(debugEl);
            
            // Add meta debug info
            const metaDebug = document.createElement('meta');
            metaDebug.name = 'soundraiser:crawler-mode';
            metaDebug.content = 'true';
            document.head.appendChild(metaDebug);
          });
        }
        
        // If it's a smart link but not a crawler, we need special handling to make sure it loads properly
        if (isSmartLink && !isCrawler) {
          console.log('Smart link detected for regular browser. Loading client-side app.');
        }
      })();
    </script>
  </head>

  <body>
    <div id="root"></div>
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
